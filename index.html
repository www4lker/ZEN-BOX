<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ZenBox - Exercício de respiração box breathing para relaxamento e foco">
    <title>ZenBox - Respiração em Caixa</title>
    
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/animation.css">
    <link rel="stylesheet" href="styles/components.css">
</head>
<body>
    <!-- Header principal -->
    <header class="header">
        <h1 class="app-title">ZenBox</h1>
        <button class="settings-btn" type="button" aria-label="Abrir configurações">
            <span class="settings-icon">⚙️</span>
        </button>
    </header>

    <!-- Container principal da aplicação -->
    <main class="app-container">
        
        <!-- Seção de progresso -->
        <section class="progress-section" aria-label="Progresso do exercício">
            <div class="progress-info">
                <span class="cycle-counter">Ciclo <span id="current-cycle">0</span> de <span id="total-cycles">13</span></span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Progresso do exercício"></div>
            </div>
        </section>

        <!-- Container da animação box breathing -->
        <section class="breathing-container" aria-label="Visualização da respiração">
            
            <!-- Contagem regressiva inicial -->
            <div class="countdown-overlay" id="countdown" aria-live="polite">
                <span class="countdown-number">3</span>
                <p class="countdown-text">Prepare-se...</p>
            </div>

            <!-- Box de animação -->
            <div class="animation-box">
                <svg class="breathing-box" viewBox="0 0 200 200" aria-hidden="true">
                    <!-- Quadrado principal -->
                    <rect class="box-outline" x="20" y="20" width="160" height="160" 
                          fill="none" stroke="currentColor" stroke-width="2"/>
                    
                    <!-- Ponto animado -->
                    <circle class="breathing-dot" cx="20" cy="20" r="8" fill="currentColor"/>
                </svg>
            </div>

            <!-- Informações centrais -->
            <div class="breathing-info">
                <div class="phase-instruction" id="phase-text" aria-live="polite">
                    Clique para começar
                </div>
                <div class="phase-timer" id="phase-timer" aria-live="polite">
                    <span class="timer-number">6</span>
                </div>
            </div>

        </section>

        <!-- Botões de fase para referência visual -->
        <section class="phase-buttons" aria-label="Fases da respiração">
            <button class="phase-btn" type="button" data-phase="inhale" disabled>
                <span class="phase-label">Inspirar</span>
                <span class="phase-duration">6s</span>
            </button>
            <button class="phase-btn" type="button" data-phase="hold1" disabled>
                <span class="phase-label">Segurar</span>
                <span class="phase-duration">6s</span>
            </button>
            <button class="phase-btn" type="button" data-phase="exhale" disabled>
                <span class="phase-label">Expirar</span>
                <span class="phase-duration">6s</span>
            </button>
            <button class="phase-btn" type="button" data-phase="hold2" disabled>
                <span class="phase-label">Segurar</span>
                <span class="phase-duration">6s</span>
            </button>
        </section>

        <!-- Controles principais -->
        <section class="controls" aria-label="Controles do exercício">
            <button class="control-btn primary" type="button" id="start-pause-btn" aria-describedby="control-status">
                <span class="btn-text">Iniciar</span>
            </button>
            <button class="control-btn secondary" type="button" id="reset-btn" aria-label="Reiniciar exercício">
                <span class="btn-text">Reiniciar</span>
            </button>
        </section>

        <!-- Status para screen readers -->
        <div id="control-status" class="sr-only" aria-live="polite"></div>

    </main>

    <!-- Modal de configurações -->
    <div class="modal-overlay" id="settings-modal" aria-hidden="true" role="dialog" aria-labelledby="settings-title" aria-modal="true">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="settings-title">Configurações</h2>
                <button class="modal-close" type="button" aria-label="Fechar configurações">✕</button>
            </header>
            
            <form class="settings-form">
                <div class="form-group">
                    <label for="duration-select">Duração por fase:</label>
                    <select id="duration-select" class="form-control">
                        <option value="3">3 segundos</option>
                        <option value="4">4 segundos</option>
                        <option value="6" selected>6 segundos</option>
                        <option value="8">8 segundos</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="cycles-input">Número de ciclos:</label>
                    <input type="number" id="cycles-input" class="form-control" 
                           min="1" max="50" value="13" aria-describedby="cycles-help">
                    <small id="cycles-help" class="form-help">Entre 1 e 50 ciclos</small>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn secondary" id="cancel-settings">Cancelar</button>
                    <button type="submit" class="btn primary" id="save-settings">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de conclusão -->
    <div class="modal-overlay" id="completion-modal" aria-hidden="true" role="dialog" aria-labelledby="completion-title" aria-modal="true">
        <div class="modal-content completion">
            <header class="modal-header">
                <div class="completion-icon">✨</div>
                <h2 id="completion-title">Exercício Concluído!</h2>
            </header>
            <div class="modal-body">
                <p class="completion-message">Você completou <span id="completed-cycles">13</span> ciclos de respiração.</p>
            </div>
            <footer class="modal-footer">
                <button type="button" class="btn secondary" id="new-session">Nova Sessão</button>
                <button type="button" class="btn primary" id="close-completion">Fechar</button>
            </footer>
        </div>
    </div>

    <!-- Scripts módulos -->
    <script type="module" src="scripts/app.js"></script>
</body>
</html>